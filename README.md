
# DATA 550 Final Project Repository
This repository holds the files to create a report based on the Resgensburg Pediatric Appendicitis dataset. 

------------------------------------------------------------------------

## Table of Contents
- [Description](#description)
- [File Structure](#file-structure)
- [How to Generate the Final Report](#how-to-generate-the-final-report)

------------------------------------------------------------------------

## Description
This data set contains information about children who were admitted to Childrenâ€™s Hospital St. Hedwig in Regensburg, Germany, between 2016 and 2021 with abdominal pain and suspected appendicitis. The report compares the sensitivities of the Alvarado Score and Pediatric Appendicitis (PA) Score in correctly predicting an appendicitis diagnosis and how the severity of diagnosis can impact the score.

------------------------------------------------------------------------

## File Structure

Below is a brief explanation of the file structure and code location

- `app_data.xlsx`: MS Excel file containing tabular data on variables collected from all cases on the first tab (labelled 'All cases') and code book listing variable details, such as the names, descriptions, and outcome type, on the second tab (labelled 'Data Summary')

- `code/`: This folder contains the individual R scripts to generate the tables and figures for the report. [01_MakeTable.R](code/01_MakeTable.R) generates the table showing the overall sensitivities for the two scoring methods. [02_MakeAlvGraph.R](code/02_MakeAlvGraph.R) and [03_MakePAGraph.R](code/03_MakePAGraph.R) show how severity of confirmed appendicitis varies within the Alvarado and PA Score respectively. [04_RenderReport.R](code/04_RenderReport.R) renders the final report.

- `output/`: This folder contains saved `.rds` files of the figures and tables generated by the code that are imported into the final report.

- `Final-Project-Report.Rmd`: R markdown document used to show the report as a pdf.

- `Makefile`: Defines the set of tasks to be executed to generate the report.

------------------------------------------------------------------------

## How to Generate the Final Report via Github

1. Clone the online repository to your local repository. Set the current working directory to the newly downloaded repository and check to ensure all contents are present.
2. Ensure all required packages are installed by `make install` in the terminal window of R studio.
3. Execute the Makefile by running the command `make report.pdf` in the terminal window of R studio.
4. Review the final report named `Final-Project-Report.pdf` in the local repository to see the analysis findings.
5. If you wish to make changes to the code or report, create and checkout a new branch and add all new commits and pushes along this branch. Submit a pull request if you wish to request for the original repository to incorporate these changes. Note: Request may be denied.

## How to Generate the Final Report via Docker

###Building the Image
1. Clone the online repository to your local repository. Set the current working directory to the newly downloaded repository and check to ensure all contents are present.

2. To build the Docker image, make sure you have Docker installed on your system. Navigate to the local directory which contains the Dockerfile and you can either: 

* run the command `docker build -t data550_finalproject .` or
* execute `make project_image` in the terminal window of R studio.
  
**Note**: You can also find the already build image at: https://hub.docker.com/repository/docker/suprithip/data550_finalproject/general


###Running the Container and Creating the Report
3. To run the automated version of the Docker image, you can either execute:

* `docker run -v "$(pwd)"/report:/final_project/report data550_finalproject` in the terminal window of R studio or
* If you wish to automate retrieving the image from Docker Hub and running the container, execute `docker run -v "$$(pwd)"/report:/final_project/report suprithip/data550_finalproject` or
* execute `make final_report.pdf` in the terminal window of R studio.

4. The final pdf will be found in the `report` folder.

**Caution**: These targets and commands have been developed using a Mac/Linux-OS system. Windows-OS users will need to add an extra / at the start of a file path when mounting a directory.


## Future Exploration
If you would like to adjust the score threshold to investigate how the sensitivity of each diagnostic method is affected:
  1. Go to the [config.yml](config.yml) to change the number from a base threshold of 6 to any other number between 1-10. Save the          file.
  2. Run `make clean` to erase your previous report and figures in the output folder.
  3. Run `make report` again to regenerate your report. Note: While the sensitivity values in the table will change, the text description will not reflect this change, so analysis must be rewritten by researcher again based on the new values.